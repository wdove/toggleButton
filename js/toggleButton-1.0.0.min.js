(function(a){var b=function(k,q){var i=a(k),g=a("<div/>").css({position:"relative",width:q.ImageWidth+"px",height:q.ImageHeight+"px"}),d=a("<a/>").attr({id:i.attr("id")+"_ToggleButton",href:""}).css({position:"absolute",left:"0px",top:"0px",width:q.ImageWidth+"px",height:q.ImageHeight+"px",fontSize:q.ImageHeight+"px",backgroundRepeat:"no-repeat"}),n=(q.CssSprites.Url!=null),p=o;if(n){d.css("background-image","url("+q.CssSprites.Url+")");p=m}else{if(q.ImagesPreLoad){a.each([q.CheckedImageUrl,q.UncheckedImageUrl,q.CheckedImageOverUrl,q.UncheckedImageOverUrl,q.DisabledCheckedImageUrl,q.DisabledUncheckedImageUrl],function(s,t){var r=new Image();r.src=t})}}if(i.is(":disabled")){p(i.is(":checked"),false,true)}else{h()}i.css("display","none").before(g.append(d)).bind("click change",h);d.click(f).mouseover(e).mouseout(j);if(a.browser.msie&&a.browser.version<=8.99){var c=i.attr("id");i.parent().find('label[for="'+i.attr("id")+'"]').attr("for",d.attr("id"))}function h(){p(i.is(":checked"),false,i.is(":disabled"))}function f(r){a(k)[0].click();r.preventDefault();return false}function e(){p(i.is(":checked"),true,i.is(":disabled"))}function j(){h()}function o(t,u,s){var r=null;if(t){if(u){r=q.CheckedImageOverUrl}else{if(s){r=q.DisabledCheckedImageUrl}else{r=q.CheckedImageUrl}}}else{if(u){r=q.UncheckedImageOverUrl}else{if(s){r=q.DisabledUncheckedImageUrl}else{r=q.UncheckedImageUrl}}}if(r==null){r=q.UncheckedImageUrl}d.css("background-image","url("+r+")")}function m(t,u,s){var w=null;if(t){if(u){w=q.CssSprites.CheckedOver}else{if(s){w=q.CssSprites.DisabledChecked}else{w=q.CssSprites.Checked}}}else{if(u){w=q.CssSprites.UncheckedOver}else{if(s){w=q.CssSprites.DisabledUnchecked}else{w=q.CssSprites.Unchecked}}}if(w==null){w=q.CssSprites.Unchecked}var r=l(w[0],q.ImageWidth);var v=l(w[1],q.ImageHeight);d.css("background-position",r+" "+v)}function l(s,r){s=s.toString();if(s.indexOf("px")<0&&s.indexOf("%")<0){return -s*r+"px"}return s}};a.fn.toggleButton=function(c){c=a.extend({},a.fn.toggleButton.defaults,c);return this.each(function(){new b(a(this),c)})};a.fn.toggleButton.defaults={ImageWidth:50,ImageHeight:50,CheckedImageUrl:null,UncheckedImageUrl:null,CheckedImageOverUrl:null,UncheckedImageOverUrl:null,DisabledCheckedImageUrl:null,DisabledUncheckedImageUrl:null,ImagesPreLoad:true,CssSprites:{Url:null,Checked:null,Unchecked:null,CheckedOver:null,UncheckedOver:null,DisabledChecked:null,DisabledUnchecked:null},Debug:false}})(jQuery);