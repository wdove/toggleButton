(function(a){var b=function(k,s){var j=a(k),o="px",c="id",h=a("<div/>").css({position:"relative",width:s.ImageWidth+o,height:s.ImageHeight+o}),d=a("<a/>").attr({id:j.attr(c)+"_ToggleButton",href:""}).css({position:"absolute",left:"0px",top:"0px",width:s.ImageWidth+o,height:s.ImageHeight+o,fontSize:s.ImageHeight+o,backgroundRepeat:"no-repeat"}),n=(s.CssSprites.Url!==null),r=q;if(n){d.css("background-image","url("+s.CssSprites.Url+")");r=m}else{if(s.ImagesPreLoad){a.each([s.CheckedImageUrl,s.UncheckedImageUrl,s.CheckedImageOverUrl,s.UncheckedImageOverUrl,s.DisabledCheckedImageUrl,s.DisabledUncheckedImageUrl],function(u,v){var t=new Image();t.src=v})}}if(p()){r(e(),false,true)}else{i()}j.css("display","none").before(h.append(d)).bind("click change",i);d.click(g).mouseover(f).mouseout(i);if(a.browser.msie&&a.browser.version<=8.99){j.parent().find('label[for="'+j.attr(c)+'"]').attr("for",d.attr(c))}function i(){r(e(),false,p())}function g(t){a(k)[0].click();t.preventDefault();return false}function f(){r(e(),true,p())}function q(v,w,u){var t=null;if(v){if(w){t=s.CheckedImageOverUrl}else{if(u){t=s.DisabledCheckedImageUrl}else{t=s.CheckedImageUrl}}}else{if(w){t=s.UncheckedImageOverUrl}else{if(u){t=s.DisabledUncheckedImageUrl}else{t=s.UncheckedImageUrl}}}if(t===null){t=s.UncheckedImageUrl}d.css("background-image","url("+t+")")}function m(v,w,u){var A=null,t,z;if(v){if(w){A=s.CssSprites.CheckedOver}else{if(u){A=s.CssSprites.DisabledChecked}else{A=s.CssSprites.Checked}}}else{if(w){A=s.CssSprites.UncheckedOver}else{if(u){A=s.CssSprites.DisabledUnchecked}else{A=s.CssSprites.Unchecked}}}if(A===null){A=s.CssSprites.Unchecked}t=l(A[0],s.ImageWidth);z=l(A[1],s.ImageHeight);d.css("background-position",t+" "+z)}function l(u,t){u=u.toString();if(u.indexOf(o)<0&&u.indexOf("%")<0){return -u*t+o}return u}function e(){return j.is(":checked")}function p(){return j.is(":disabled")}};a.fn.toggleButton=function(c){c=a.extend({},a.fn.toggleButton.defaults,c);return this.each(function(){new b(a(this),c)})};a.fn.toggleButton.defaults={ImageWidth:50,ImageHeight:50,CheckedImageUrl:null,UncheckedImageUrl:null,CheckedImageOverUrl:null,UncheckedImageOverUrl:null,DisabledCheckedImageUrl:null,DisabledUncheckedImageUrl:null,ImagesPreLoad:true,CssSprites:{Url:null,Checked:null,Unchecked:null,CheckedOver:null,UncheckedOver:null,DisabledChecked:null,DisabledUnchecked:null},Debug:false}})(jQuery);